# Set cmake minimum
cmake_minimum_required(VERSION 3.10)

# Set cmake options
set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)
set(CMAKE_C_COMPILER gcc)
set(CMAKE_CXX_COMPILER g++)
set(CMAKE_GENERATOR "MinGW Makefiles" CACHE INTERNAL "" FORCE)
set(CMAKE_BUILD_TYPE "Debug")

# Set project name, project version and wether it's a debugor relese build
set(PROJECT_NAME "ecs")
set(PROJECT_VERSION "v0.1")
set(PROJECT_VERSION_MAYOR 0)
set(PROJECT_VERSION_MINOR 1)
set(BUILD_TYPE ${CMAKE_BUILD_TYPE})

# Set project name
project(${PROJECT_NAME})

# Set the output to the bin folder
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin)
#set(OUTPUT_DEBUG_PATH ${EXECUTABLE_OUTPUT_PATH}/debug)
#set(OUTPUT_RELEASE_PATH ${EXECUTABLE_OUTPUT_PATH}/release)
set(PROJECT_SOURCE_DIR ${PROJECT_SOURCE_DIR}/source)
set(CMAKE_SOURCE_DIR ${PROJECT_SOURCE_DIR})

# Configure a header file to pass some of the CMake settings
# to the source code
configure_file(
  "${PROJECT_SOURCE_DIR}/config/Config.hpp.in"
  "${PROJECT_SOURCE_DIR}/config/Config.hpp"
  @ONLY
  )

#include_directories("${PROJECT_BINARY_DIR}")

#add_definitions(-DPROJECT_VERSION=${PROJECT_VERSION})
#add_definitions(-DBUILD_DEBUG=${BUILD_DEBUG})

# Add all cpp files used in the program
add_executable(${PROJECT_NAME} 
	#src
	${PROJECT_SOURCE_DIR}/src/main2.cpp
)

#ADD_CUSTOM_TARGET(debug
#  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Debug ${CMAKE_SOURCE_DIR}
#  COMMAND ${CMAKE_COMMAND} --build ${OUTPUT_DEBUG_PATH} --target all
#  COMMENT "Switch CMAKE_BUILD_TYPE to Debug"
#)
#
#ADD_CUSTOM_TARGET(release
#  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Release ${CMAKE_SOURCE_DIR}
#  COMMAND ${CMAKE_COMMAND} --build ${OUTPUT_RELEASE_PATH} --target all
#  COMMENT "Switch CMAKE_BUILD_TYPE to Release"
#)
#
#ADD_CUSTOM_TARGET(all
#  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Debug ${CMAKE_SOURCE_DIR}
#  COMMAND ${CMAKE_COMMAND} --build ${OUTPUT_DEBUG_PATH} --target all
#  COMMAND ${CMAKE_COMMAND} -DCMAKE_BUILD_TYPE=Release ${CMAKE_SOURCE_DIR}
#  COMMAND ${CMAKE_COMMAND} --build ${OUTPUT_RELEASE_PATH} --target all
#  COMMENT "Switch CMAKE_BUILD_TYPE to All"
#)

#target_compile_features(${PROJECT_NAME} PRIVATE cxx_lambda_init_captures)
#target_compile_definitions(${PROJECT_NAME} PRIVATE PROJECT_VERSION=${PROJECT_VERSION} BUILD_DEBUG=${BUILD_DEBUG})